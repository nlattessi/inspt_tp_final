{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}INSPT - TP Final | Menu{% endblock %}

{% block page_content %}

<!-- Modal confirmacion para borrar categoria -->
{% include "_categoria_modal_borrado.html" %}

<!-- Modal confirmacion para borrar item -->
{% include "_item_modal_borrado.html" %}

<!-- Todo el menu -->
<div class="row">
    
    <!-- Lista categorias -->
    <div class="col-md-3">

        <div class="page-header">
            <h1 class="text-center">Categorias</h1>
        </div>

        <div class="list-group">
        {% for categoria in categorias %}
            <div
                 {% if id == categoria.id %} 
                    class="list-group-item list-group-item-linkable clearfix list-group-item-info"
                {% else %}
                    class="list-group-item list-group-item-linkable clearfix"
                {% endif %}
                data-link="{{ url_for('menu.menu', id=categoria.id) }}">
                <p class="list-group-item-text pull-left" >{{ categoria.nombre }}</p>
                <span class="pull-right">
                    <button class="btn btn-xs btn-info catEdit"
                        data-url="{{ url_for('menu.categoria_editar', id=categoria.id) }}">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    </button>
                    <button class="btn btn-xs btn-danger catDelete"
                        data-elemento="{{ categoria.nombre }}"
                        data-id="{{ categoria.id }}"
                        data-url="{{ url_for('menu.categoria_borrar', id=categoria.id) }}">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                    </button>
                </span>            
            </div>
        {% endfor %}
        </div>
    </div>

    <!-- Lista items -->
    <div class="col-md-9">

        <div class="page-header">
            <h1 class="text-center">Items</h1>
        </div>

        {% include "_item_lista.html" %}

    </div>
        
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
$(document).ready(function() {
    $('.list-group-item-linkable').on('click', function() {        
        window.location.href = $(this).data('link');
    });

    $('.list-group-item-linkable button')
    .on('click', function(e) {
        e.stopPropagation();
    });

    categoriaEditarBorrar();

    itemEditarBorrar();
});
</script>
{% endblock %}